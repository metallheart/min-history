<!DOCTYPE html>
<html>
  <head>
    <!--[if IE 8]><script src="./node_modules/ie8/build/ie8.js"></script><![endif]-->
    <script type="text/javascript" src="./min-history.js"></script>
  </head>
  <body>
    <a class="ajax" href="/mylink">My Link</a>
    <a class="ajax" href="/otherlink">Other Link</a>
    <a class="ajax" href="/otherlink#foo">third Link</a>
    <a class="ajax" href="/third/link">third Link</a>
    <a class="ajax" href="/third/link#doe">third Link doe</a>
    <a class="ajax" href="/bar">bar</a>
    <a class="ajax" href="/bar#zoo">bar zoo</a>
    <a class="ajax" href="/bar?bloupi#zoo">bar bloupi zoo</a>
    <script type="text/javascript">
      (function() {
        history.init({
          hashChangeAlone:true,
          basePath:"/"
        });

        if (history.emulated)
          console.log('Emulated Html5 History API');
        else
          console.log('Native Html5 History API');


        var count = 0;
        var links = document.querySelectorAll('a.ajax');
        for (var i = 0; i < links.length; i++)
          links[i].onclick = function(e) {
            console.log("CLICK");
            e.preventDefault();
            history.pushState({ hello:"world "+(count++)}, null, this.href);
            return false;
          };

       // popstate event from back/forward in browser
        window.addEventListener('popstate', function(e) {
          console.log("* POP STATE : " + history.location.relative, " - ", JSON.stringify(history.state));
        });

        window.addEventListener('hashchange', function(e) {
          console.log("* HASH CHANGE " + history.location.hash, " - ", JSON.stringify(history.state));
        });

      })();
    </script>
  </body>
</html>